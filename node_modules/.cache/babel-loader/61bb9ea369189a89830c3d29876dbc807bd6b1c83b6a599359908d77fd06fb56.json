{"ast":null,"code":"var _jsxFileName = \"/Users/mtrindade/Documents/Dev_Docs/Projetos/LetMeAsk_Project/src/contexts/AuthContext.tsx\",\n  _s = $RefreshSig$();\n//Autoimort: Identifica a importação do componente Home e faz de forma automática> Command, aceitar importacoes automaticas\n//contexto permite features como autenticação funcionarem em todas as páginas sem precisar repetir o código\n//useEffect e um hook para disparo de efeitos colaterais, quando quero disparar uma funcao sempre que algo acontecer, ex: uma informacao mudou.\n//import firebase from \"firebase/compat\";\nimport { createContext, useEffect, useState } from \"react\";\nimport { auth, firebase } from \"../services/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n//children faz referencia a elements das routes, que sao elementos do react, aos quais me refiro com ReactNode, que precisa ser importado.\n\n//Implementando contexto -> string valor inicial\nexport const AuthContext = /*#__PURE__*/createContext({});\nexport function AuthContextProvider(props) {\n  _s();\n  const [user, setUser] = useState();\n\n  //useEffect: Caso onAuthStateChanged, em contato com firebase, detectar que usuario havia logado anteriormente, vai manter o nome do usuario logado mediante a atualizacao da pagina\n  //Boa pratica: Toda vez que se declara um eventlistener no React e recomendado que se use uma variavel, e tambem criar um retorno que te descadastre de todos os event listeners usado\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(user => {\n      if (user) {\n        //Se foi resultado um usuario dessa autenticacao, then..\n        const {\n          displayName,\n          photoURL,\n          uid\n        } = user;\n\n        //Se o user nao tenha nome ou foto, a aplicacao nao vai funcionar\n        if (!displayName || !photoURL) {\n          throw new Error('Missing information from Google Account.');\n        }\n        setUser({\n          id: uid,\n          name: displayName,\n          avatar: photoURL\n        });\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []); //Primerio qual funcao eu quero executar, segundo quando <Array> que eu quero executar essa funcao, qual parametro que vai mudar e ser trigger para disparar a funcao, se eu deixar o array vazio, ela dispara uma unica vez\n\n  async function signInWithGoogle() {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const result = await auth.signInWithPopup(provider);\n    //signInwithPopup: Fazer autenticação direto com Poupup na tela, ao inves de redirecionar o cliente.\n\n    if (result.user) {\n      //Se foi resultado um usuario dessa autenticacao, then..\n      const {\n        displayName,\n        photoURL,\n        uid\n      } = result.user;\n\n      //Se o user nao tenha nome ou foto, a aplicacao nao vai funcionar\n      if (!displayName || !photoURL) {\n        throw new Error('Missing information from Google Account.');\n      }\n      setUser({\n        id: uid,\n        name: displayName,\n        avatar: photoURL\n      });\n    }\n  }\n\n  //Jogando signInWithGoogle a AuthContext, leva a autenticacao a todas as paginas --gracas a API de contexto!!!\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      signInWithGoogle\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthContextProvider, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n_c = AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","auth","firebase","AuthContext","AuthContextProvider","props","user","setUser","unsubscribe","onAuthStateChanged","displayName","photoURL","uid","Error","id","name","avatar","signInWithGoogle","provider","GoogleAuthProvider","result","signInWithPopup","children"],"sources":["/Users/mtrindade/Documents/Dev_Docs/Projetos/LetMeAsk_Project/src/contexts/AuthContext.tsx"],"sourcesContent":["//Autoimort: Identifica a importação do componente Home e faz de forma automática> Command, aceitar importacoes automaticas\n//contexto permite features como autenticação funcionarem em todas as páginas sem precisar repetir o código\n//useEffect e um hook para disparo de efeitos colaterais, quando quero disparar uma funcao sempre que algo acontecer, ex: uma informacao mudou.\n//import firebase from \"firebase/compat\";\nimport { createContext, ReactNode, useEffect, useState } from \"react\";\nimport { auth, firebase } from \"../services/firebase\";\n\ntype User = {\n    id: string;\n    name: string;\n    avatar: string;\n  }\n  \ntype AuthContextType = {\n    user: User | undefined; //No primeiro momento nao existe usuario logado, logo ele e undefined!\n    signInWithGoogle: () => Promise <void>; //Toda funcao assincrona retorna uma promessa e void - Funcao que nao tem parametros no () e tambem nao tem return dentro dela \n  }\n  \ntype AuthContextProviderProps = {\n    children: ReactNode;\n}\n//children faz referencia a elements das routes, que sao elementos do react, aos quais me refiro com ReactNode, que precisa ser importado.\n\n//Implementando contexto -> string valor inicial\nexport const AuthContext = createContext({} as AuthContextType);\n\nexport function AuthContextProvider(props : AuthContextProviderProps) {\n\n    const [user, setUser] =  useState<User>();\n\n    //useEffect: Caso onAuthStateChanged, em contato com firebase, detectar que usuario havia logado anteriormente, vai manter o nome do usuario logado mediante a atualizacao da pagina\n    //Boa pratica: Toda vez que se declara um eventlistener no React e recomendado que se use uma variavel, e tambem criar um retorno que te descadastre de todos os event listeners usado\n    \n    useEffect(() => {\n      const unsubscribe = auth.onAuthStateChanged(user => {\n        if (user) { //Se foi resultado um usuario dessa autenticacao, then..\n          const {displayName, photoURL, uid} = user\n  \n          //Se o user nao tenha nome ou foto, a aplicacao nao vai funcionar\n          if (!displayName || !photoURL) {\n            throw new Error('Missing information from Google Account.');\n            }\n  \n            setUser({\n              id: uid,\n              name: displayName,\n              avatar:photoURL\n            })\n        }\n      })\n  \n      return () => {\n        unsubscribe();\n      }\n  \n    }, []) //Primerio qual funcao eu quero executar, segundo quando <Array> que eu quero executar essa funcao, qual parametro que vai mudar e ser trigger para disparar a funcao, se eu deixar o array vazio, ela dispara uma unica vez\n  \n    async function signInWithGoogle() {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      \n      const result = await auth.signInWithPopup(provider);\n      //signInwithPopup: Fazer autenticação direto com Poupup na tela, ao inves de redirecionar o cliente.\n      \n      if (result.user) { //Se foi resultado um usuario dessa autenticacao, then..\n        const {displayName, photoURL, uid} = result.user\n  \n        //Se o user nao tenha nome ou foto, a aplicacao nao vai funcionar\n        if (!displayName || !photoURL) {\n          throw new Error('Missing information from Google Account.');\n          }\n  \n          setUser({\n            id: uid,\n            name: displayName,\n            avatar:photoURL\n          })\n        }\n            \n    }\n  \n    //Jogando signInWithGoogle a AuthContext, leva a autenticacao a todas as paginas --gracas a API de contexto!!!\n    return (\n        <AuthContext.Provider value={{ user, signInWithGoogle}}> \n            {props.children}\n        </AuthContext.Provider>\n    )\n}"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,SAASA,aAAa,EAAaC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACrE,SAASC,IAAI,EAAEC,QAAQ,QAAQ,sBAAsB;AAAC;AAgBtD;;AAEA;AACA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC,CAAC,CAAoB;AAE/D,OAAO,SAASM,mBAAmB,CAACC,KAAgC,EAAE;EAAA;EAElE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAIP,QAAQ,EAAQ;;EAEzC;EACA;;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMS,WAAW,GAAGP,IAAI,CAACQ,kBAAkB,CAACH,IAAI,IAAI;MAClD,IAAIA,IAAI,EAAE;QAAE;QACV,MAAM;UAACI,WAAW;UAAEC,QAAQ;UAAEC;QAAG,CAAC,GAAGN,IAAI;;QAEzC;QACA,IAAI,CAACI,WAAW,IAAI,CAACC,QAAQ,EAAE;UAC7B,MAAM,IAAIE,KAAK,CAAC,0CAA0C,CAAC;QAC3D;QAEAN,OAAO,CAAC;UACNO,EAAE,EAAEF,GAAG;UACPG,IAAI,EAAEL,WAAW;UACjBM,MAAM,EAACL;QACT,CAAC,CAAC;MACN;IACF,CAAC,CAAC;IAEF,OAAO,MAAM;MACXH,WAAW,EAAE;IACf,CAAC;EAEH,CAAC,EAAE,EAAE,CAAC,EAAC;;EAEP,eAAeS,gBAAgB,GAAG;IAChC,MAAMC,QAAQ,GAAG,IAAIhB,QAAQ,CAACD,IAAI,CAACkB,kBAAkB,EAAE;IAEvD,MAAMC,MAAM,GAAG,MAAMnB,IAAI,CAACoB,eAAe,CAACH,QAAQ,CAAC;IACnD;;IAEA,IAAIE,MAAM,CAACd,IAAI,EAAE;MAAE;MACjB,MAAM;QAACI,WAAW;QAAEC,QAAQ;QAAEC;MAAG,CAAC,GAAGQ,MAAM,CAACd,IAAI;;MAEhD;MACA,IAAI,CAACI,WAAW,IAAI,CAACC,QAAQ,EAAE;QAC7B,MAAM,IAAIE,KAAK,CAAC,0CAA0C,CAAC;MAC3D;MAEAN,OAAO,CAAC;QACNO,EAAE,EAAEF,GAAG;QACPG,IAAI,EAAEL,WAAW;QACjBM,MAAM,EAACL;MACT,CAAC,CAAC;IACJ;EAEJ;;EAEA;EACA,oBACI,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAE;MAAEL,IAAI;MAAEW;IAAgB,CAAE;IAAA,UAClDZ,KAAK,CAACiB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACI;AAE/B;AAAC,GA5DelB,mBAAmB;AAAA,KAAnBA,mBAAmB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}